
{% extends 'navbar.html' %}

{% block content %}
	<h4 class="center"> Results {% if algo_name %} for {{ algo_name }} {% endif %} </h4>
	<div class="container">
	<div class="responsive-table" style="overflow-x:scroll; height: 80%;">
		<table class="highlight centered">
			<thead>
				<tr>		
					{% for col in x_cols %}
						<th> {{ col }} </th>					
					{% endfor %}		
					<th> Test values: </th>
					<th> Prediction: </th>  
				</tr>
			</thead>
			{% for y1 in full_set %}
			<tbody>		
				{% for ele in y1 %}		
					<td> {{ ele }} </td>
				{% endfor %}
			</tbody>
			{% endfor %}
		</table>
	</div>
	{% if hyper_result %}
	<h5 class="center"> Hyperparameter Tuning Report </h5>
	<div class="responsive-table" style="overflow-x:scroll; height: 80%;">	
		{{ hyper_result|safe }}
	</div>
	{% endif %}	
	<div class="responsive-table" style="overflow-x:scroll;">
		<h5 class="center"> Result metric values for the regressor </h5>		
		<table class="highlight centered">
			<thead>
				<tr> 
					<th> Explained Variance Score </th>
					<th> Mean Absolute Error </th>
					<th> Mean Squared Error </th>
					<th> Mean Squared Log Error </th>
					<th> Median Absolute Error </th>
					<th> r2 Score </th>
				</tr>
			</thead>
			<tbody>
				<td> {{ explained_variance_score }} </td>
				<td> {{ mean_absolute_error }} </td>
				<td> {{ mean_squared_error }} </td>
				<td> {{ mean_squared_log_error }} </td>
				<td> {{ median_absolute_error }} </td>
				<td> {{ r2_score }} </td>
			</tbody>
		</table>
	</div>
	<div id="scatterchart_material" class="center" style="display:block;">
	</div>
	</div>
	<script type="text/javascript">
		 google.charts.load('current', {
		   'packages': ['corechart']
		 });
		 google.charts.setOnLoadCallback(drawChart);
		function drawChart () {

        var data = new google.visualization.DataTable();
        data.addColumn('number');
        data.addColumn('number');

        data.addRows({{ zip_json|safe }});

        var options = {
          width: 800,
          height: 500,
          chart: {
            title: 'Predictions versus Test values',
            subtitle: 'On a supervised regression algorithm',
          },
          hAxis: {title: 'Test values'},
          vAxis: {title: 'Predicted values'},
	 trendlines: { 0: {
		type:'linear',
		color: 'red'} },
	legend:'none',
        };

        var chart = new google.visualization.ScatterChart(document.getElementById('scatterchart_material'));

        chart.draw(data, options);// google.charts.Scatter.convertOptions(options));
      }		
	</script>
{% endblock %}
